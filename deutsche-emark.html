<!DOCTYPE html>
<html lang=de>

<head>
    <meta charset=UTF-8>
    <title>Deutsche eMark Cold Wallet Generator</title>
    <meta name=description
        content="Ein leichtgewichtiger, client-seitiger, zuverl&auml;ssiger, schneller, universeller Open-Source-Generator f&uuml;r Cold Wallets, der fast alle wichtigen Kryptow&auml;hrungen unterst&uuml;tzt">
    <meta name=keywords
        content="minimal, sicher, schnell, universal, cold, wallet, generator, offline, deustche, emark, dem, bitcoin, btc, Kryptow&auml;hrung, cryptocurrency">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/style2.css">
</head>

<body onload=generate()>
    <div id=container><br>
        <div class=noprint><button class="buttons" onclick=generate()>Generate</button> <button class="buttons" onclick=window.print()>Print</button> <a
                href=index.html><input type=button class="buttons" value=Home></a></div>
        <table>
            <tr>
                <h1 class=titlemain>Deutsche eMark Cold Wallet</h1>
            </tr>
            <tr>
                <th class=grayHeaders>&Ouml;ffentliche Adresse / Public Address <span
                        id=shareColor>(TEILEN/SHARE)</span></th>
            </tr>
            <tr>
                <td>
                    <div id=public>Generierung...</div>
                </td>
            </tr>
            <tr>
                <td>
                    <div id=public_qr></div>
                </td>
            </tr>
            <tr>
                <th class=grayHeaders>
                    <div id=secretLabel>Privater Schl&uuml;ssel / Private Key <span
                            id=secretColor>(GEHEIM/SECRET)</span></div>
                </th>
            </tr>
            <tr>
                <td>
                    <div id=secret>Generierung...</div>
                </td>
            </tr>
            <tr>
                <td>
                    <div id=secret_qr></div>
                </td>
            </tr>
        </table>
    </div>
    <script src=js/bitcoinjs-lib.js></script>
    <script src=js/qrcode.js></script>
    <script>
        function generate() {
         const dem = {
          messagePrefix: '\x19dem Signed Message:\n',
          bech32: '',
          bip32: {
            public: 0x4488B21E,
            private: 0x4488ADE4,
          },
          pubKeyHash: 0x35,
          scriptHash: 0x1e,
          wif: 0xb5
        };

        const keyPair = bitcoin.ECPair.makeRandom({
          compressed: false,
          network: dem,
        });

        const publicAddress = keyPair.getAddress();
        const privateKeyWIF = keyPair.toWIF();

        const publicElem = document.getElementById("public");
        const privateElem = document.getElementById("secret");
        const publicQRElem = document.getElementById("public_qr");
        const privateQRElem = document.getElementById("secret_qr");

        if (publicElem && privateElem && publicQRElem && privateQRElem) {
          publicElem.textContent = publicAddress;
          privateElem.textContent = privateKeyWIF;

          publicQRElem.innerHTML = "";
          privateQRElem.innerHTML = "";

          new QRCode(publicQRElem, {
            text: publicAddress,
            width: 128,
            height: 128,
            correctLevel: QRCode.CorrectLevel.H,
          });

          new QRCode(privateQRElem, {
            text: privateKeyWIF,
            width: 128,
            height: 128,
            correctLevel: QRCode.CorrectLevel.H,
          });
        }
      }
    </script>
</body>

</html>
